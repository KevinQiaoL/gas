(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-work-inspection-forms"],{"2f38":function(e,t,i){"use strict";var s=i("ee27");i("c740"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(i("f3f3"));i("96cf");var n=s(i("c964")),r=i("c537"),o=null,l={computed:{cateValue:function(){var e=this.hideDangerForms.businessDomainId,t=this.categorys.findIndex((function(t){return t.id===e}));return t<0?0:t},typeValue:function(){var e=this.hideDangerForms.classId,t=this.types.findIndex((function(t){return t.id===e}));return t<0?0:t},isDisabled:function(){var e=this.hideDangerForms,t=e.recordId,i=e.businessDomainId,s=e.classId,a=e.pwuId,n=e.address;if(1===+this.action)return!t||!i||!s||!a||!n;var r=this.problemForms,o=r.name,l=r.des;return!o||!l}},data:function(){return{action:null,grades:[{id:1,name:"一般隐患"},{id:2,name:"重大隐患"}],categorys:[],types:[],hideDangerForms:{recordId:"",businessDomainId:"",businessDomainName:"",classId:"",className:"",grade:1,pwuId:"",pwuName:"",address:"",latentDescription:"",latentExposedProblems:"",possibleDangers:"",securitySituation:""},problemForms:{id:"",name:"",des:""},isSubmitting:!1}},onLoad:function(e){var t=this,i=e.type,s=e.id;this.action=i,o=s,uni.setNavigationBarTitle({title:1==i?"录入隐患":"录入问题"}),1==i&&(this.initHidDanger(),uni.$on("emit-comp",(function(e){var i=e.subjectId,s=e.subjectName;t.hideDangerForms.pwuId=i,t.hideDangerForms.pwuName=s})))},onUnload:function(){1===+this.action&&uni.$off("emit-comp")},methods:{handleGrades:function(e){var t=e.id;this.hideDangerForms.grade=t},handleLocation:function(){var e=this;uni.chooseLocation({success:function(t){"chooseLocation:ok"===t.errMsg&&(e.hideDangerForms.address=t.name)}})},handleSubmit:function(){this.isSubmitting=!0,1===+this.action?this.querySaveOfLatent():this.querySaveOfProblem()},handleChangeCate:function(e){var t=e.detail.value,i=this.categorys[t],s=i.id,a=i.name;this.hideDangerForms.businessDomainId=s,this.hideDangerForms.businessDomainName=a},handleChangeType:function(e){var t=e.detail.value,i=this.types[t],s=i.id,a=i.name;this.hideDangerForms.classId=s,this.hideDangerForms.className=a},initHidDanger:function(){return Promise.all([this.queryTypeOfHidDanger(1),this.queryTypeOfHidDanger(2)])},queryTypeOfHidDanger:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,(0,r.queryTypeOfHidDanger)({id:o,type:e});case 2:s=i.sent,1===+s.code?1===e?t.types=s.data:t.categorys=s.data:t.$msg("获取类型/类别失败："+s.msg);case 4:case"end":return i.stop()}}),i)})))()},querySaveOfLatent:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=(0,a.default)({},e.hideDangerForms),delete i.businessDomainName,delete i.className,delete i.pwuName,t.next=6,(0,r.querySaveOfLatent)(i);case 6:s=t.sent,e.isSubmitting=!1,1===+s.code?e.$nextTick((function(){uni.navigateBack()})):e.$msg("获取类型失败："+s.msg);case 9:case"end":return t.stop()}}),t)})))()},querySaveOfProblem:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=Object.assign({},e.problemForms,{id:o}),t.next=3,(0,r.querySaveOfProblem)(i);case 3:s=t.sent,e.isSubmitting=!1,1===+s.code?e.$nextTick((function(){uni.navigateBack()})):e.$msg("获取类型失败："+s.msg);case 6:case"end":return t.stop()}}),t)})))()}}};t.default=l},"5f31":function(e,t,i){var s=i("a052");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("4f06").default;a("27cc78ae",s,!0,{sourceMap:!1,shadowMode:!1})},"8a02":function(e,t,i){"use strict";var s=i("5f31"),a=i.n(s);a.a},"8e77":function(e,t,i){"use strict";i.r(t);var s=i("2f38"),a=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);t["default"]=a.a},a052:function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-80458304]{background-color:#fff;min-height:100%}.forms[data-v-80458304]{padding:0 %?40?% calc(%?152?% + var(--window-bottom))}.forms__btn[data-v-80458304]{position:fixed;background-color:hsla(0,0%,100%,.6);right:0;bottom:0;left:0;padding:0 %?30?%;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.forms__item[data-v-80458304]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?40?% 0 %?20?%}.forms__item.is-start[data-v-80458304]{-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}.forms__item__label[data-v-80458304]{font-size:%?26?%;color:#333;width:%?190?%;padding:%?10?% 0}.forms__item__inner[data-v-80458304]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;padding:0 0 0 %?15?%}.forms__item__input[data-v-80458304]{-webkit-box-flex:1;-webkit-flex:1;flex:1;border:%?1?% solid #ddd;width:100%;min-height:%?64?%;padding:%?10?%;border-radius:%?8?%;font-size:%?28?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.forms__item__input .value[data-v-80458304]{font-size:%?28?%}.forms__item__input__inner[data-v-80458304]{font-size:%?28?%}.forms__item__textarea[data-v-80458304]{-webkit-box-flex:1;-webkit-flex:1;flex:1;border:%?1?% solid #ddd;width:100%;padding:%?10?%;border-radius:%?8?%;font-size:%?28?%}.forms__item__textarea__inner[data-v-80458304]{width:100%;height:%?132?%}body.?%PAGE?%[data-v-80458304]{background-color:#fff}',""]),e.exports=t},b6a0:function(e,t,i){"use strict";i.r(t);var s=i("d841"),a=i("8e77");for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("8a02");var r,o=i("f0c5"),l=Object(o["a"])(a["default"],s["b"],s["c"],!1,null,"80458304",null,!1,s["a"],r);t["default"]=l.exports},d841:function(e,t,i){"use strict";var s,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"forms"},[1==e.action?[i("v-uni-view",{staticClass:"forms__item"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("隐患名称：")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-view",{staticClass:"forms__item__input"},[i("v-uni-input",{staticClass:"forms__item__input__inner",attrs:{type:"text","placeholder-class":"placeholder",placeholder:"输入隐患名称"},model:{value:e.hideDangerForms.recordId,callback:function(t){e.$set(e.hideDangerForms,"recordId",t)},expression:"hideDangerForms.recordId"}})],1)],1)],1),i("v-uni-view",{staticClass:"forms__item"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("隐患类型：")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-picker",{staticClass:"forms__item__input",attrs:{mode:"selector","range-key":"name",value:e.typeValue,range:e.types},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.handleChangeType.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"value",class:!e.hideDangerForms.classId&&"placeholder"},[e._v(e._s(e.hideDangerForms.className||"请选择"))])],1)],1)],1),i("v-uni-view",{staticClass:"forms__item"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("隐患类别：")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-picker",{staticClass:"forms__item__input",attrs:{mode:"selector","range-key":"name",value:e.cateValue,range:e.categorys},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.handleChangeCate.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"value",class:!e.hideDangerForms.businessDomainId&&"placeholder"},[e._v(e._s(e.hideDangerForms.businessDomainName||"请选择"))])],1)],1)],1),i("v-uni-view",{staticClass:"forms__item"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("隐患等级：")]),i("v-uni-view",{staticClass:"forms__item__inner"},e._l(e.grades,(function(t){return i("v-uni-view",{key:t.id,staticClass:"radio",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.handleGrades(t)}}},[i("v-uni-text",{staticClass:"iconfont",class:e.hideDangerForms.grade==t.id?"iconsuccess-fill":"iconsuccess"}),e._v(e._s(t.name))],1)})),1)],1),i("v-uni-view",{staticClass:"forms__item"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("隐患所属企业：")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-navigator",{staticClass:"forms__item__input",attrs:{url:"/pages/work/inspection/search?isSearchComp=1"}},[i("v-uni-view",{staticClass:"value",class:!e.hideDangerForms.pwuId&&"placeholder"},[e._v(e._s(e.hideDangerForms.pwuName||"选择企业"))])],1)],1)],1),i("v-uni-view",{staticClass:"forms__item"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("地址信息：")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-view",{staticClass:"forms__item__input"},[i("v-uni-input",{staticClass:"forms__item__input__inner",attrs:{"placeholder-class":"placeholder",placeholder:"输入地址",type:"text"},model:{value:e.hideDangerForms.address,callback:function(t){e.$set(e.hideDangerForms,"address","string"===typeof t?t.trim():t)},expression:"hideDangerForms.address"}})],1),i("v-uni-view",{staticClass:"custom__search__btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleLocation.apply(void 0,arguments)}}},[e._v("获取定位")])],1)],1),i("v-uni-view",{staticClass:"forms__item is-start"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("隐患描述："),i("br"),e._v("（选填）")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-view",{staticClass:"forms__item__textarea"},[i("v-uni-textarea",{staticClass:"forms__item__textarea__inner",attrs:{"placeholder-class":"placeholder",placeholder:"请输入描述"},model:{value:e.hideDangerForms.latentDescription,callback:function(t){e.$set(e.hideDangerForms,"latentDescription","string"===typeof t?t.trim():t)},expression:"hideDangerForms.latentDescription"}})],1)],1)],1),i("v-uni-view",{staticClass:"forms__item is-start"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("隐患暴露问题："),i("br"),e._v("（选填）")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-view",{staticClass:"forms__item__textarea"},[i("v-uni-textarea",{staticClass:"forms__item__textarea__inner",attrs:{"placeholder-class":"placeholder",placeholder:"请输入描述"},model:{value:e.hideDangerForms.latentExposedProblems,callback:function(t){e.$set(e.hideDangerForms,"latentExposedProblems","string"===typeof t?t.trim():t)},expression:"hideDangerForms.latentExposedProblems"}})],1)],1)],1),i("v-uni-view",{staticClass:"forms__item is-start"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("可能存在风险："),i("br"),e._v("（选填）")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-view",{staticClass:"forms__item__textarea"},[i("v-uni-textarea",{staticClass:"forms__item__textarea__inner",attrs:{"placeholder-class":"placeholder",placeholder:"请输入描述"},model:{value:e.hideDangerForms.possibleDangers,callback:function(t){e.$set(e.hideDangerForms,"possibleDangers","string"===typeof t?t.trim():t)},expression:"hideDangerForms.possibleDangers"}})],1)],1)],1),i("v-uni-view",{staticClass:"forms__item is-start"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("安全技术状况："),i("br"),e._v("（选填）")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-view",{staticClass:"forms__item__textarea"},[i("v-uni-textarea",{staticClass:"forms__item__textarea__inner",attrs:{"placeholder-class":"placeholder",placeholder:"请输入描述"},model:{value:e.hideDangerForms.securitySituation,callback:function(t){e.$set(e.hideDangerForms,"securitySituation","string"===typeof t?t.trim():t)},expression:"hideDangerForms.securitySituation"}})],1)],1)],1)]:[i("v-uni-view",{staticClass:"forms__item"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("问题名称：")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-view",{staticClass:"forms__item__input"},[i("v-uni-input",{staticClass:"forms__item__input__inner",attrs:{type:"text","placeholder-class":"placeholder",placeholder:"输入问题名称"},model:{value:e.problemForms.name,callback:function(t){e.$set(e.problemForms,"name","string"===typeof t?t.trim():t)},expression:"problemForms.name"}})],1)],1)],1),i("v-uni-view",{staticClass:"forms__item is-start"},[i("v-uni-view",{staticClass:"forms__item__label"},[e._v("问题描述：")]),i("v-uni-view",{staticClass:"forms__item__inner"},[i("v-uni-view",{staticClass:"forms__item__textarea"},[i("v-uni-textarea",{staticClass:"forms__item__textarea__inner",attrs:{"placeholder-class":"placeholder",placeholder:"请输入描述"},model:{value:e.problemForms.des,callback:function(t){e.$set(e.problemForms,"des","string"===typeof t?t.trim():t)},expression:"problemForms.des"}})],1)],1)],1)]],2),i("v-uni-view",{staticClass:"forms__btn"},[i("v-uni-button",{staticClass:"button-primary",attrs:{disabled:e.isDisabled,loading:e.isSubmitting},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSubmit.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)},n=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}))}}]);